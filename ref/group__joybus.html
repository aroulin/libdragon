<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdragon: Joybus Subsystem</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdragon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Joybus Subsystem<div class="ingroups"><a class="el" href="group__libdragon.html">libdragon</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Joybus peripheral interface.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:joybus_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="joybus_8c.html">joybus.c</a></td></tr>
<tr class="memdesc:joybus_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Joybus Subsystem. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:joybus_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="joybus_8h.html">joybus.h</a></td></tr>
<tr class="memdesc:joybus_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Joybus Subsystem. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga96357e747d908aa6c354b507d9b0fdc4"><td class="memItemLeft" align="right" valign="top"><a id="ga96357e747d908aa6c354b507d9b0fdc4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga96357e747d908aa6c354b507d9b0fdc4">JOYBUS_BLOCK_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:ga96357e747d908aa6c354b507d9b0fdc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of a Joybus input/output block in bytes. <br /></td></tr>
<tr class="separator:ga96357e747d908aa6c354b507d9b0fdc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd5f84cf2323e720ab0b79fff05e8383"><td class="memItemLeft" align="right" valign="top"><a id="gabd5f84cf2323e720ab0b79fff05e8383"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#gabd5f84cf2323e720ab0b79fff05e8383">JOYBUS_BLOCK_DWORDS</a>&#160;&#160;&#160;( <a class="el" href="group__joybus.html#ga96357e747d908aa6c354b507d9b0fdc4">JOYBUS_BLOCK_SIZE</a> / sizeof(uint64_t) )</td></tr>
<tr class="memdesc:gabd5f84cf2323e720ab0b79fff05e8383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of a Joybus input/output block in double-words. <br /></td></tr>
<tr class="separator:gabd5f84cf2323e720ab0b79fff05e8383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3158a02f7e8626b69c4bc59d33dad9ad"><td class="memItemLeft" align="right" valign="top"><a id="ga3158a02f7e8626b69c4bc59d33dad9ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga3158a02f7e8626b69c4bc59d33dad9ad">EEPROM_BLOCK_SIZE</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ga3158a02f7e8626b69c4bc59d33dad9ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of an EEPROM save block in bytes. <br /></td></tr>
<tr class="separator:ga3158a02f7e8626b69c4bc59d33dad9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga5d2c70b26685af9f2498cd45f88f224f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga5d2c70b26685af9f2498cd45f88f224f">eeprom_type_t</a> { <a class="el" href="group__joybus.html#gga5d2c70b26685af9f2498cd45f88f224fa76e90a4797b64fe50d006bda0d657dc0">EEPROM_NONE</a> = 0
, <a class="el" href="group__joybus.html#gga5d2c70b26685af9f2498cd45f88f224faa5124b25fb78cddf007a0ce23ce6f9f9">EEPROM_4K</a> = 1
, <a class="el" href="group__joybus.html#gga5d2c70b26685af9f2498cd45f88f224fa25ac025e7c7c47297fe2830112f83cc7">EEPROM_16K</a> = 2
 }</td></tr>
<tr class="memdesc:ga5d2c70b26685af9f2498cd45f88f224f"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM Probe Values.  <a href="group__joybus.html#ga5d2c70b26685af9f2498cd45f88f224f">More...</a><br /></td></tr>
<tr class="separator:ga5d2c70b26685af9f2498cd45f88f224f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6d62432ce8ecd83cd1588716fd28fdb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga6d62432ce8ecd83cd1588716fd28fdb7">joybus_exec</a> (const void *input, void *output)</td></tr>
<tr class="memdesc:ga6d62432ce8ecd83cd1588716fd28fdb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a 64-byte block of data to the PIF and read the 64-byte result.  <a href="group__joybus.html#ga6d62432ce8ecd83cd1588716fd28fdb7">More...</a><br /></td></tr>
<tr class="separator:ga6d62432ce8ecd83cd1588716fd28fdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8d22be9ed8151aaf00f3aaa52909a87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__joybus.html#ga5d2c70b26685af9f2498cd45f88f224f">eeprom_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#gad8d22be9ed8151aaf00f3aaa52909a87">eeprom_present</a> (void)</td></tr>
<tr class="memdesc:gad8d22be9ed8151aaf00f3aaa52909a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Probe the EEPROM interface on the cartridge.  <a href="group__joybus.html#gad8d22be9ed8151aaf00f3aaa52909a87">More...</a><br /></td></tr>
<tr class="separator:gad8d22be9ed8151aaf00f3aaa52909a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf6fdff1ec1d5c3f51e1ab79cdec3530"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#gabf6fdff1ec1d5c3f51e1ab79cdec3530">eeprom_total_blocks</a> (void)</td></tr>
<tr class="memdesc:gabf6fdff1ec1d5c3f51e1ab79cdec3530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine how many blocks of EEPROM exist on the cartridge.  <a href="group__joybus.html#gabf6fdff1ec1d5c3f51e1ab79cdec3530">More...</a><br /></td></tr>
<tr class="separator:gabf6fdff1ec1d5c3f51e1ab79cdec3530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d4e5d5cd58c25c23954b9b0e8b02ac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga8d4e5d5cd58c25c23954b9b0e8b02ac0">eeprom_read</a> (uint8_t block, uint8_t *dest)</td></tr>
<tr class="memdesc:ga8d4e5d5cd58c25c23954b9b0e8b02ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a block from EEPROM.  <a href="group__joybus.html#ga8d4e5d5cd58c25c23954b9b0e8b02ac0">More...</a><br /></td></tr>
<tr class="separator:ga8d4e5d5cd58c25c23954b9b0e8b02ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2aa704e1a317e4544a5be6e020f4d53"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#gaf2aa704e1a317e4544a5be6e020f4d53">eeprom_write</a> (uint8_t block, const uint8_t *src)</td></tr>
<tr class="memdesc:gaf2aa704e1a317e4544a5be6e020f4d53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a block to EEPROM.  <a href="group__joybus.html#gaf2aa704e1a317e4544a5be6e020f4d53">More...</a><br /></td></tr>
<tr class="separator:gaf2aa704e1a317e4544a5be6e020f4d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ffaa1a2d12887b9ebe66e293e9909fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga8ffaa1a2d12887b9ebe66e293e9909fe">eeprom_read_bytes</a> (uint8_t *dest, size_t start, size_t len)</td></tr>
<tr class="memdesc:ga8ffaa1a2d12887b9ebe66e293e9909fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a buffer of bytes from EEPROM.  <a href="group__joybus.html#ga8ffaa1a2d12887b9ebe66e293e9909fe">More...</a><br /></td></tr>
<tr class="separator:ga8ffaa1a2d12887b9ebe66e293e9909fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68beee5a570724abcd4dc81e0cd86331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga68beee5a570724abcd4dc81e0cd86331">eeprom_write_bytes</a> (const uint8_t *src, size_t start, size_t len)</td></tr>
<tr class="memdesc:ga68beee5a570724abcd4dc81e0cd86331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a buffer of bytes to EEPROM.  <a href="group__joybus.html#ga68beee5a570724abcd4dc81e0cd86331">More...</a><br /></td></tr>
<tr class="separator:ga68beee5a570724abcd4dc81e0cd86331"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">SI status register bit definitions</h2></td></tr>
<tr class="memitem:gaa522bd708d3dd1df64a630a520db3b4c"><td class="memItemLeft" align="right" valign="top"><a id="gaa522bd708d3dd1df64a630a520db3b4c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#gaa522bd708d3dd1df64a630a520db3b4c">SI_STATUS_DMA_BUSY</a>&#160;&#160;&#160;( 1 &lt;&lt; 0 )</td></tr>
<tr class="memdesc:gaa522bd708d3dd1df64a630a520db3b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">SI DMA busy. <br /></td></tr>
<tr class="separator:gaa522bd708d3dd1df64a630a520db3b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga986a6408fb27f36259cfdc11ddbf6096"><td class="memItemLeft" align="right" valign="top"><a id="ga986a6408fb27f36259cfdc11ddbf6096"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__joybus.html#ga986a6408fb27f36259cfdc11ddbf6096">SI_STATUS_IO_BUSY</a>&#160;&#160;&#160;( 1 &lt;&lt; 1 )</td></tr>
<tr class="memdesc:ga986a6408fb27f36259cfdc11ddbf6096"><td class="mdescLeft">&#160;</td><td class="mdescRight">SI IO busy. <br /></td></tr>
<tr class="separator:ga986a6408fb27f36259cfdc11ddbf6096"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Joybus peripheral interface. </p>
<p>The Joybus subsystem is in charge of communication with all controllers, accessories, and peripherals plugged into the N64 controller ports as well as some peripherals on the cartridge. The Joybus subsystem is responsible for communicating with the serial interface (SI) registers to send commands to controllers (including Controller Paks, Rumble Paks, and Transfer Paks), the VRU, EEPROM save memory, and the cartridge-based real-time clock.</p>
<p>For Controller Pak functions, refer to the <a class="el" href="group__mempak.html">Mempak Filesystem Routines</a>.</p>
<p>For Transfer Pak functions, refer to the <a class="el" href="group__transferpak.html">Transfer Pak Interface</a>.</p>
<p>For all other controller-related functions, refer to the <a class="el" href="group__controller.html">Controller Subsystem</a>.</p>
<p>For real-time clock functions, refer to the <a class="el" href="group__rtc.html">Real-time Clock Subsystem</a>. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga5d2c70b26685af9f2498cd45f88f224f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d2c70b26685af9f2498cd45f88f224f">&#9670;&nbsp;</a></span>eeprom_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__joybus.html#ga5d2c70b26685af9f2498cd45f88f224f">eeprom_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EEPROM Probe Values. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__joybus.html#gad8d22be9ed8151aaf00f3aaa52909a87" title="Probe the EEPROM interface on the cartridge.">eeprom_present</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga5d2c70b26685af9f2498cd45f88f224fa76e90a4797b64fe50d006bda0d657dc0"></a>EEPROM_NONE&#160;</td><td class="fielddoc"><p>No EEPROM present. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5d2c70b26685af9f2498cd45f88f224faa5124b25fb78cddf007a0ce23ce6f9f9"></a>EEPROM_4K&#160;</td><td class="fielddoc"><p>4 kilobit (64-block) EEPROM present </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5d2c70b26685af9f2498cd45f88f224fa25ac025e7c7c47297fe2830112f83cc7"></a>EEPROM_16K&#160;</td><td class="fielddoc"><p>16 kilobit (256-block) EEPROM present </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad8d22be9ed8151aaf00f3aaa52909a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8d22be9ed8151aaf00f3aaa52909a87">&#9670;&nbsp;</a></span>eeprom_present()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__joybus.html#ga5d2c70b26685af9f2498cd45f88f224f">eeprom_type_t</a> eeprom_present </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Probe the EEPROM interface on the cartridge. </p>
<p>Inspect the identifier half-word of the EEPROM status response to determine which EEPROM save type is available (if any).</p>
<dl class="section return"><dt>Returns</dt><dd>which EEPROM type was detected on the cartridge. </dd></dl>

</div>
</div>
<a id="ga8d4e5d5cd58c25c23954b9b0e8b02ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d4e5d5cd58c25c23954b9b0e8b02ac0">&#9670;&nbsp;</a></span>eeprom_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a block from EEPROM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">block</td><td>Block to read data from. Joybus accesses EEPROM in 8-byte blocks.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>Destination buffer for the eight bytes read from EEPROM. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8ffaa1a2d12887b9ebe66e293e9909fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ffaa1a2d12887b9ebe66e293e9909fe">&#9670;&nbsp;</a></span>eeprom_read_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_read_bytes </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a buffer of bytes from EEPROM. </p>
<p>This is a high-level convenience helper that abstracts away the one-at-a-time EEPROM block access pattern.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>Destination buffer to read data into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>Byte offset in EEPROM to start reading data from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Byte length of data to read into buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabf6fdff1ec1d5c3f51e1ab79cdec3530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf6fdff1ec1d5c3f51e1ab79cdec3530">&#9670;&nbsp;</a></span>eeprom_total_blocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t eeprom_total_blocks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine how many blocks of EEPROM exist on the cartridge. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if EEPROM was not detected or the number of EEPROM 8-byte save blocks available. </dd></dl>

</div>
</div>
<a id="gaf2aa704e1a317e4544a5be6e020f4d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2aa704e1a317e4544a5be6e020f4d53">&#9670;&nbsp;</a></span>eeprom_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t eeprom_write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a block to EEPROM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">block</td><td>Block to write data to. Joybus accesses EEPROM in 8-byte blocks.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>Source buffer for the eight bytes of data to write to EEPROM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the EEPROM status byte </dd></dl>

</div>
</div>
<a id="ga68beee5a570724abcd4dc81e0cd86331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga68beee5a570724abcd4dc81e0cd86331">&#9670;&nbsp;</a></span>eeprom_write_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eeprom_write_bytes </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a buffer of bytes to EEPROM. </p>
<p>This is a high-level convenience helper that abstracts away the one-at-a-time EEPROM block access pattern.</p>
<p>Each EEPROM block write takes approximately 15 milliseconds; this operation may block for a while with large buffer sizes:</p>
<ul>
<li>4k EEPROM: 64 blocks * 15ms = 960ms!</li>
<li>16k EEPROM: 256 blocks * 15ms = 3840ms!</li>
</ul>
<p>You may want to pause audio before calling this.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>Source buffer containing data to write</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>Byte offset in EEPROM to start writing data to</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Byte length of the src buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6d62432ce8ecd83cd1588716fd28fdb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d62432ce8ecd83cd1588716fd28fdb7">&#9670;&nbsp;</a></span>joybus_exec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void joybus_exec </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a 64-byte block of data to the PIF and read the 64-byte result. </p>
<p>This function is not a stable feature of the libdragon API and should be considered experimental!</p>
<p>The usage of this function will likely change as a result of the ongoing effort to integrate the multitasking kernel with asynchronous operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>Source buffer for the input block to send to the PIF</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">output</td><td>Destination buffer to place the output block from the PIF </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 4 2021 22:06:45 for libdragon by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
